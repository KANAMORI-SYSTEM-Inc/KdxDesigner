<Window x:Class="KdxDesigner.Views.CylinderPropertiesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="シリンダープロパティ" Height="700" Width="600"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="シリンダープロパティ" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- ID (読み取り専用) -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="ID:"/>
                    <TextBox Grid.Column="1" Text="{Binding Id}" IsReadOnly="True" Background="#F0F0F0"/>
                </Grid>

                <!-- PlcId (読み取り専用) -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="PLC ID:"/>
                    <TextBox Grid.Column="1" Text="{Binding PlcId}" IsReadOnly="True" Background="#F0F0F0"/>
                </Grid>

                <!-- PUCO -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="PUCO:"/>
                    <TextBox Grid.Column="1" Text="{Binding Puco}"/>
                </Grid>

                <!-- CYNum -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="CY番号:"/>
                    <TextBox Grid.Column="1" Text="{Binding CyNum}"/>
                </Grid>

                <!-- Go -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="Go:"/>
                    <TextBox Grid.Column="1" Text="{Binding Go}"/>
                </Grid>

                <!-- Back -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="Back:"/>
                    <TextBox Grid.Column="1" Text="{Binding Back}"/>
                </Grid>

                <!-- OilNum -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="油番号:"/>
                    <TextBox Grid.Column="1" Text="{Binding OilNum}"/>
                </Grid>

                <!-- MachineNameId -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="機械名:"/>
                    <ComboBox Grid.Column="1"
                              ItemsSource="{Binding MachineNames}"
                              SelectedValue="{Binding MachineNameId}"
                              SelectedValuePath="Id">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock>
                                    <Run Text="{Binding FullName}"/>
                                    <Run Text=" (" Foreground="Gray"/>
                                    <Run Text="{Binding ShortName}" Foreground="Gray"/>
                                    <Run Text=")" Foreground="Gray"/>
                                </TextBlock>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </Grid>

                <!-- DriveSubId -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="駆動サブ:"/>
                    <ComboBox Grid.Column="1"
                              ItemsSource="{Binding DriveSubs}"
                              SelectedValue="{Binding DriveSubId}"
                              SelectedValuePath="Id"
                              DisplayMemberPath="DriveSubName"/>
                </Grid>

                <!-- PlaceId -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="場所ID:"/>
                    <TextBox Grid.Column="1" Text="{Binding PlaceId}"/>
                </Grid>

                <!-- CYNameSub -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="CY名サブ:"/>
                    <TextBox Grid.Column="1" Text="{Binding CYNameSub}"/>
                </Grid>

                <!-- SensorId -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="センサーID:"/>
                    <TextBox Grid.Column="1" Text="{Binding SensorId}"/>
                </Grid>

                <!-- FlowType -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="フロータイプ:"/>
                    <TextBox Grid.Column="1" Text="{Binding FlowType}"/>
                </Grid>

                <!-- GoSensorCount -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="Goセンサー数:"/>
                    <TextBox Grid.Column="1" Text="{Binding GoSensorCount}"/>
                </Grid>

                <!-- BackSensorCount -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="Backセンサー数:"/>
                    <TextBox Grid.Column="1" Text="{Binding BackSensorCount}"/>
                </Grid>

                <!-- RetentionSensorGo -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="保持センサーGo:"/>
                    <TextBox Grid.Column="1" Text="{Binding RetentionSensorGo}"/>
                </Grid>

                <!-- RetentionSensorBack -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="保持センサーBack:"/>
                    <TextBox Grid.Column="1" Text="{Binding RetentionSensorBack}"/>
                </Grid>

                <!-- SortNumber -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="ソート番号:"/>
                    <TextBox Grid.Column="1" Text="{Binding SortNumber}"/>
                </Grid>

                <!-- FlowCount -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="フロー数:"/>
                    <TextBox Grid.Column="1" Text="{Binding FlowCount}"/>
                </Grid>

                <!-- FlowCYGo -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="FlowCYGo:"/>
                    <TextBox Grid.Column="1" Text="{Binding FlowCYGo}"/>
                </Grid>

                <!-- FlowCYBack -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="FlowCYBack:"/>
                    <TextBox Grid.Column="1" Text="{Binding FlowCYBack}"/>
                </Grid>

                <!-- CylinderCycle 関連設定 -->
                <Border BorderBrush="Gray" BorderThickness="1" Margin="0,10,0,5" Padding="10">
                    <StackPanel>
                        <TextBlock Text="関連サイクル設定" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                        <TextBlock Text="このシリンダーが使用されるサイクルを選択してください" Margin="0,0,0,5" Foreground="Gray"/>

                        <ListBox ItemsSource="{Binding AvailableCycles}"
                                 Height="200"
                                 BorderBrush="LightGray"
                                 BorderThickness="1">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                              Content="{Binding Cycle.CycleName}"
                                              Margin="5"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- ボタン -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="保存" Width="80" Margin="5" Command="{Binding SaveCommand}"/>
            <Button Content="キャンセル" Width="80" Margin="5" Command="{Binding CancelCommand}"/>
        </StackPanel>
    </Grid>
</Window>
