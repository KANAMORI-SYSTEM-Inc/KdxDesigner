<Window x:Class="KdxDesigner.Views.MemorySettingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:KdxDesigner.Views" xmlns:utils="clr-namespace:KdxDesigner.Utils"
        mc:Ignorable="d"
        Title="ãƒ¡ãƒ¢ãƒªè¨­å®š" Height="700" Width="900"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <utils:BoolToColorConverter x:Key="BoolToColorConverter"/>

        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="5,2"/>
            <Setter Property="Padding" Value="3"/>
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Margin" Value="10,2"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="5,2"/>
        </Style>


    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠžã‚¨ãƒªã‚¢ -->
        <GroupBox Header="ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠž" Grid.Row="0" Padding="10" Margin="0,0,0,10">
            <StackPanel>
                <!-- æ—¢å­˜ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠž -->
                <StackPanel Orientation="Vertical" Margin="0,0,0,10" x:Name="ExistingProfilePanel">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsNewProfile}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«:" Width="100" FontWeight="Bold"/>
                        <ComboBox ItemsSource="{Binding Profiles}"
          SelectedItem="{Binding SelectedProfile}"
          DisplayMemberPath="Name"
          Width="300" Margin="5,0"/>
                        <Button Content="æ–°è¦ä½œæˆ" Command="{Binding CreateNewProfileCommand}"
        Width="100" Margin="10,0,0,0" Padding="5"/>
                        <TextBlock Text="{Binding SelectedProfile.Description}"
           Margin="20,0,0,0"
           FontStyle="Italic"
           Foreground="Gray"/>
                    </StackPanel>



                </StackPanel>

                <!-- æ–°è¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ -->
                <StackPanel x:Name="NewProfilePanel">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsNewProfile}" Value="True">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                        <TextBlock Text="ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å:" Width="100" FontWeight="Bold"/>
                        <TextBox Text="{Binding NewProfileName, UpdateSourceTrigger=PropertyChanged}" Width="300"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="èª¬æ˜Ž:" Width="100" FontWeight="Bold"/>
                        <TextBox Text="{Binding NewProfileDescription, UpdateSourceTrigger=PropertyChanged}" Width="300"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Button Content="ä¿å­˜" Command="{Binding SaveNewProfileCommand}"
                                Width="100" Margin="0,0,10,0" Padding="5"
                                Background="#4CAF50" Foreground="White" FontWeight="Bold"/>
                        <Button Content="ã‚­ãƒ£ãƒ³ã‚»ãƒ«" Command="{Binding CancelNewProfileCommand}"
                                Width="100" Padding="5"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </GroupBox>

        <!-- ãƒ‡ãƒã‚¤ã‚¹è¨­å®šã‚¨ãƒªã‚¢ -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <GroupBox Header="ãƒ‡ãƒã‚¤ã‚¹é–‹å§‹ç•ªå·è¨­å®š" Padding="10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- å·¦åˆ— -->
                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                        <!-- å·¥ç¨‹ãƒ‡ãƒã‚¤ã‚¹ -->
                        <Border BorderBrush="LightGray" BorderThickness="1" Padding="10" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="å·¥ç¨‹ãƒ‡ãƒã‚¤ã‚¹" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Lãƒ‡ãƒã‚¤ã‚¹ [å·¥ç¨‹]" Width="180"/>
                                    <TextBox Text="{Binding ProcessDeviceStartL}" Width="100"/>
                                    <CheckBox Content="ãƒ¡ãƒ¢ãƒªä¿å­˜" IsChecked="{Binding IsProcessMemory}"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Lãƒ‡ãƒã‚¤ã‚¹ [å·¥ç¨‹è©³ç´°]" Width="180"/>
                                    <TextBox Text="{Binding DetailDeviceStartL}" Width="100"/>
                                    <CheckBox Content="ãƒ¡ãƒ¢ãƒªä¿å­˜" IsChecked="{Binding IsDetailMemory}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- æ“ä½œãƒ‡ãƒã‚¤ã‚¹ -->
                        <Border BorderBrush="LightGray" BorderThickness="1" Padding="10" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="æ“ä½œãƒ»ã‚·ãƒªãƒ³ãƒ€ãƒ‡ãƒã‚¤ã‚¹" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Mãƒ‡ãƒã‚¤ã‚¹ [æ“ä½œ]" Width="180"/>
                                    <TextBox Text="{Binding OperationDeviceStartM}" Width="100"/>
                                    <CheckBox Content="ãƒ¡ãƒ¢ãƒªä¿å­˜" IsChecked="{Binding IsOperationMemory}"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Mãƒ‡ãƒã‚¤ã‚¹ [ã‚·ãƒªãƒ³ãƒ€]" Width="180"/>
                                    <TextBox Text="{Binding CylinderDeviceStartM}" Width="100"/>
                                    <CheckBox Content="ãƒ¡ãƒ¢ãƒªä¿å­˜" IsChecked="{Binding IsCylinderMemory}"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Dãƒ‡ãƒã‚¤ã‚¹ [é€Ÿåº¦å¤‰åŒ–æŒ‡ä»¤]" Width="180"/>
                                    <TextBox Text="{Binding CylinderDeviceStartD}" Width="100"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- ã‚¨ãƒ©ãƒ¼ãƒ‡ãƒã‚¤ã‚¹ -->
                        <Border BorderBrush="LightGray" BorderThickness="1" Padding="10">
                            <StackPanel>
                                <TextBlock Text="ã‚¨ãƒ©ãƒ¼ãƒ‡ãƒã‚¤ã‚¹" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Mãƒ‡ãƒã‚¤ã‚¹ [ã‚¨ãƒ©ãƒ¼]" Width="180"/>
                                    <TextBox Text="{Binding ErrorDeviceStartM}" Width="100"/>
                                    <CheckBox Content="ãƒ¡ãƒ¢ãƒªä¿å­˜" IsChecked="{Binding IsErrorMemory}"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Tãƒ‡ãƒã‚¤ã‚¹ [ã‚¨ãƒ©ãƒ¼]" Width="180"/>
                                    <TextBox Text="{Binding ErrorDeviceStartT}" Width="100"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- å³åˆ— -->
                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                        <!-- ã‚¿ã‚¤ãƒžãƒ¼ãƒ‡ãƒã‚¤ã‚¹ -->
                        <Border BorderBrush="LightGray" BorderThickness="1" Padding="10" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="ã‚¿ã‚¤ãƒžãƒ¼ãƒ‡ãƒã‚¤ã‚¹" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Tãƒ‡ãƒã‚¤ã‚¹ [ã‚¿ã‚¤ãƒž]" Width="180"/>
                                    <TextBox Text="{Binding DeviceStartT}" Width="100"/>
                                    <CheckBox Content="ãƒ¡ãƒ¢ãƒªä¿å­˜" IsChecked="{Binding IsTimerMemory}"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ZR [ã‚¿ã‚¤ãƒž]" Width="180"/>
                                    <TextBox Text="{Binding TimerStartZR}" Width="100"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- å·¥ç¨‹æ™‚é–“ãƒ‡ãƒã‚¤ã‚¹ -->
                        <Border BorderBrush="LightGray" BorderThickness="1" Padding="10">
                            <StackPanel>
                                <TextBlock Text="å·¥ç¨‹æ™‚é–“ãƒ‡ãƒã‚¤ã‚¹" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ZR [å·¥ç¨‹ã‚¿ã‚¤ãƒ ç¾åœ¨]" Width="180"/>
                                    <TextBox Text="{Binding ProsTimeStartZR}" Width="100"/>
                                    <CheckBox Content="ãƒ¡ãƒ¢ãƒªä¿å­˜" IsChecked="{Binding IsProsTimeMemory}"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ZR [å·¥ç¨‹ã‚¿ã‚¤ãƒ å‰å›ž]" Width="180"/>
                                    <TextBox Text="{Binding ProsTimePreviousStartZR}" Width="100"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ZR [CYã‚¿ã‚¤ãƒ ]" Width="180"/>
                                    <TextBox Text="{Binding CyTimeStartZR}" Width="100"/>
                                    <CheckBox Content="ãƒ¡ãƒ¢ãƒªä¿å­˜" IsChecked="{Binding IsCyTimeMemory}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>
            </GroupBox>
        </ScrollViewer>

        <!-- å®Ÿè¡Œãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="ãƒ¡ãƒ¢ãƒªè¨­å®šå®Ÿè¡Œ" Command="{Binding ExecuteMemorySettingCommand}"
                    Width="150" Height="35" Margin="0,0,10,0"
                    Background="#2196F3" Foreground="White" FontWeight="Bold" FontSize="14"/>
            <Button Content="é–‰ã˜ã‚‹" IsCancel="True"
                    Width="100" Height="35"
                    Padding="5"/>
        </StackPanel>

        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,0,0,0">
            <TextBlock Text="ãƒ‡ãƒã‚¤ã‚¹æ•°:" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <TextBlock Text="{Binding TotalMemoryDeviceCount}" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <TextBlock Text="{Binding LastMemoryConfigTime}" VerticalAlignment="Center" Foreground="DarkGray" 
Visibility="{Binding IsMemoryConfigured, Converter={StaticResource BooleanToVisibilityConverter}}" Margin="0,0,10,0"/>

            <TextBlock Text="ãƒ¡ãƒ¢ãƒªè¨­å®šçŠ¶æ…‹:" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>

            <Border BorderBrush="{Binding IsMemoryConfigured, 
                        Converter={StaticResource BoolToColorConverter}, 
                        ConverterParameter='Green|Gray'}" BorderThickness="1" CornerRadius="3" Padding="5,2">
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsMemoryConfigured}" Value="True">
                                <Setter Property="Background" Value="#E6FFE6"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsMemoryConfigured}" Value="False">
                                <Setter Property="Background" Value="#F0F0F0"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <StackPanel Orientation="Horizontal">
                    <Ellipse Width="8" Height="8" Margin="0,0,5,0">
                        <Ellipse.Style>
                            <Style TargetType="Ellipse">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsMemoryConfigured}" Value="True">
                                        <Setter Property="Fill" Value="Green"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsMemoryConfigured}" Value="False">
                                        <Setter Property="Fill" Value="Gray"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Ellipse.Style>
                    </Ellipse>
                    <TextBlock Text="{Binding MemoryConfigurationStatus}" VerticalAlignment="Center"/>
                </StackPanel>

            </Border>
            <!-- ãƒ¡ãƒ¢ãƒªãƒ‡ãƒã‚¤ã‚¹ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ -->
            <Button Command="{Binding ShowMemoryDeviceListCommand}" 
        IsEnabled="{Binding IsMemoryConfigured}"
        Padding="10,3" Margin="10,0,0,0">
                <Button.Style>
                    <Style TargetType="Button">
                        <Style.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ“‹" FontSize="14" Margin="0,0,5,0"/>
                    <TextBlock Text="ä¸€è¦§è¡¨ç¤º" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>
</Window>
